"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[177],{5756(e,s,t){t.d(s,{R:()=>o,x:()=>d});var n=t(9471);const r={},a=n.createContext(r);function o(e){const s=n.useContext(a);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),n.createElement(a.Provider,{value:s},e.children)}},7612(e,s,t){t.r(s),t.d(s,{assets:()=>i,contentTitle:()=>d,default:()=>u,frontMatter:()=>o,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"linux/Steam/steam-shared-library","title":"Steam Shared Library","description":"This document will walk through the steps to setup a shared Steam Library so that all users on one computer can share the same game files.","source":"@site/docs/linux/Steam/steam-shared-library.md","sourceDirName":"linux/Steam","slug":"/linux/Steam/steam-shared-library","permalink":"/docs/linux/Steam/steam-shared-library","draft":false,"unlisted":false,"editUrl":"https://github.com/echo-core/docs-site/tree/main/site/docs/linux/Steam/steam-shared-library.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Technitium Letsencrypt with Cloudflare","permalink":"/docs/linux/DNS/technitium-letsencrypt"},"next":{"title":"Linux Howtos - Advanced","permalink":"/docs/category/linux-howtos---advanced"}}');var r=t(2615),a=t(5756);const o={},d="Steam Shared Library",i={},l=[];function c(e){const s={code:"code",h1:"h1",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"steam-shared-library",children:"Steam Shared Library"})}),"\n",(0,r.jsx)(s.p,{children:"This document will walk through the steps to setup a shared Steam Library so that all users on one computer can share the same game files."}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["Create a new ",(0,r.jsx)(s.code,{children:"btrfs"})," mount and global directory to share my Steam library files among users on the same box. This will avoid snapshot rollbacks messing with your game files and allow you to setup independant snapshots if you want:"]}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"sudo mkdir -p /data \\\nsudo mount -o subvol=/ /dev/mapper/luks-<UUID> /mnt \\\nsudo btrfs subvolume create /mnt/@data \\\ncat << EOF >>/etc/fstab\n/dev/mapper/luks-<UUID> /data          btrfs   subvol=/@data,defaults,noatime,compress=zstd,commit=120 0 0\nEOF \\\nsudo umount /mnt \\\nsudo systemctl daemon-reload \\\nsudo mount -av \\\nmkdir -p /data/games\n"})}),"\n",(0,r.jsxs)(s.ol,{start:"2",children:["\n",(0,r.jsxs)(s.li,{children:["Add user(s) to the ",(0,r.jsx)(s.code,{children:"games"})," group:"]}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"sudo usermod -a -G games <user>\n"})}),"\n",(0,r.jsxs)(s.ol,{start:"3",children:["\n",(0,r.jsx)(s.li,{children:"Set directory permissions and default permissions:"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"sudo chown root:games /data/games\nsudo setfacl -d -m g:games:rwx /data/games\n"})}),"\n",(0,r.jsxs)(s.ol,{start:"4",children:["\n",(0,r.jsx)(s.li,{children:"For existing libraries, you can set your new default permissions recursively:"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"getfacl -d /data/games|sudo setfacl -d -R --set-file=- /data/games\n"})}),"\n",(0,r.jsxs)(s.ol,{start:"5",children:["\n",(0,r.jsx)(s.li,{children:"Verify permissions:"}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"getfacl /data/games\n# file: data/games\n# owner: root\n# group: games\nuser::rwx\ngroup::rwx\ngroup:games:rwx\nmask::rwx\nother::r-x\ndefault:user::rwx\ndefault:group::rwx\ndefault:group:games:rwx\ndefault:mask::rwx\ndefault:other::r-x\n"})}),"\n",(0,r.jsxs)(s.ol,{start:"6",children:["\n",(0,r.jsxs)(s.li,{children:["You should now be able login to Steam and add the new library and move the games files around without issue. Other users on the computer within the ",(0,r.jsx)(s.code,{children:"games"})," group should be able to use the library."]}),"\n"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{children:"Steam > Settings > Storage > Add Drive + > Let me choose another location > Add > Browse to `/data/games` > Click `Ok`.\n"})}),"\n",(0,r.jsxs)(s.ol,{start:"7",children:["\n",(0,r.jsx)(s.li,{children:"Set the new library as the default and download or move some games to it."}),"\n"]})]})}function u(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);