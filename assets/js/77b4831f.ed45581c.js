"use strict";(globalThis.webpackChunksite=globalThis.webpackChunksite||[]).push([[177],{5756(e,s,t){t.d(s,{R:()=>o,x:()=>i});var r=t(9471);const n={},a=r.createContext(n);function o(e){const s=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:o(e.components),r.createElement(a.Provider,{value:s},e.children)}},7612(e,s,t){t.r(s),t.d(s,{assets:()=>d,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"linux/Steam/steam-shared-library","title":"Steam Shared Library","description":"This document will walk through the steps to setup a shared Steam Library so that all users on one computer can share the same game files. It assumes you are using btrfs as your root filesystem.","source":"@site/docs/linux/Steam/steam-shared-library.md","sourceDirName":"linux/Steam","slug":"/linux/Steam/steam-shared-library","permalink":"/docs/linux/Steam/steam-shared-library","draft":false,"unlisted":false,"editUrl":"https://github.com/echo-core/docs-site/tree/main/site/docs/linux/Steam/steam-shared-library.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Technitium Letsencrypt with Cloudflare","permalink":"/docs/linux/DNS/technitium-letsencrypt"},"next":{"title":"Linux Howtos - Advanced","permalink":"/docs/category/linux-howtos---advanced"}}');var n=t(2615),a=t(5756);const o={},i="Steam Shared Library",d={},l=[{value:"Create mount and directory",id:"create-mount-and-directory",level:2},{value:"Add user(s) to the <code>games</code> group",id:"add-users-to-the-games-group",level:2},{value:"Set directory permissions and default permissions",id:"set-directory-permissions-and-default-permissions",level:2},{value:"Verify permissions",id:"verify-permissions",level:2},{value:"Configure Steam",id:"configure-steam",level:2}];function c(e){const s={admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",mdxAdmonitionTitle:"mdxAdmonitionTitle",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.header,{children:(0,n.jsx)(s.h1,{id:"steam-shared-library",children:"Steam Shared Library"})}),"\n",(0,n.jsxs)(s.p,{children:["This document will walk through the steps to setup a shared Steam Library so that all users on one computer can share the same game files. It assumes you are using ",(0,n.jsx)(s.code,{children:"btrfs"})," as your root filesystem."]}),"\n",(0,n.jsx)(s.h2,{id:"create-mount-and-directory",children:"Create mount and directory"}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.em,{children:"This will avoid snapshot rollbacks messing with your game files and allow you to setup independant snapshots if you want:"})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"BTRFS_MNT=$(findmnt -n -o SOURCE / | sed 's/\\[.*//' | awk -F/ '{print $NF}') \\\nsudo mkdir -p /data \\\nsudo mount -o subvol=/ /dev/mapper/$BTRFS_MNT /mnt \\\nsudo btrfs subvolume create /mnt/@data \\\ncat << EOF >>/etc/fstab\n/dev/mapper/$BTRFS_MNT /data          btrfs   subvol=/@data,defaults,noatime,compress=zstd,commit=120 0 0\nEOF \\\nsudo umount /mnt \\\nsudo systemctl daemon-reload \\\nsudo mount -av \\\nmkdir -p /data/games\n"})}),"\n",(0,n.jsxs)(s.admonition,{type:"tip",children:[(0,n.jsxs)(s.mdxAdmonitionTitle,{children:["Once done, just verify the output of your ",(0,n.jsx)(s.code,{children:"/etc/fstab"})," looks correct. It should look something like below."]}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"cat /etc/fstab|grep /data\n/dev/mapper/luks-72289a87-7aed-4559-a334-794c3557834a /data          btrfs   subvol=/@data,defaults,noatime,compress=zstd,commit=120 0 0\n"})})]}),"\n",(0,n.jsxs)(s.h2,{id:"add-users-to-the-games-group",children:["Add user(s) to the ",(0,n.jsx)(s.code,{children:"games"})," group"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"sudo usermod -a -G games <user>\n"})}),"\n",(0,n.jsx)(s.h2,{id:"set-directory-permissions-and-default-permissions",children:"Set directory permissions and default permissions"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"sudo chown root:games /data/games\nsudo setfacl -d -m g:games:rwx /data/games\n"})}),"\n",(0,n.jsx)(s.p,{children:"For existing libraries, you can set your new default permissions recursively"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"getfacl -d /data/games|sudo setfacl -d -R --set-file=- /data/games\n"})}),"\n",(0,n.jsx)(s.h2,{id:"verify-permissions",children:"Verify permissions"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"getfacl /data/games\n# file: data/games\n# owner: root\n# group: games\nuser::rwx\ngroup::rwx\ngroup:games:rwx\nmask::rwx\nother::r-x\ndefault:user::rwx\ndefault:group::rwx\ndefault:group:games:rwx\ndefault:mask::rwx\ndefault:other::r-x\n"})}),"\n",(0,n.jsx)(s.h2,{id:"configure-steam",children:"Configure Steam"}),"\n",(0,n.jsxs)(s.p,{children:["You should now be able login to Steam and add the new library and move the games files around without issue. Other users on the computer within the ",(0,n.jsx)(s.code,{children:"games"})," group should be able to use the library."]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"Steam > Settings > Storage > Add Drive + > Let me choose another location > Add > Browse to `/data/games` > Click `Ok`.\n"})}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.em,{children:"Set the new library as the default and download or move some games to it."})})]})}function u(e={}){const{wrapper:s}={...(0,a.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}}}]);